{"ast":null,"code":"import { createClient } from '@supabase/supabase-js';\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL;\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY;\n\n// Helpful runtime validation: React .env variables are injected at build/dev-server start.\n// If they're missing at runtime it's usually because the dev server wasn't restarted\n// after creating/updating `.env` or the `.env` file is in the wrong location.\nif (!supabaseUrl || !supabaseAnonKey) {\n  // Keep this as console.error so it shows clearly in the browser/dev server logs\n  // and helps the developer quickly spot misconfiguration instead of a vague\n  // \"Invalid API key\" error from the Supabase client.\n  // eslint-disable-next-line no-console\n  console.error('Supabase config missing: REACT_APP_SUPABASE_URL or REACT_APP_SUPABASE_ANON_KEY is not set.');\n}\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// API configuration\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to handle API responses\nconst handleResponse = async response => {\n  const data = await response.json();\n  if (!response.ok) {\n    const error = new Error(data.error || 'An error occurred');\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n  return data;\n};\nexport const api = {\n  // Auth endpoints\n  register: (email, password, fullName) => fetch(`${API_URL}/auth/register`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password,\n      full_name: fullName\n    })\n  }).then(handleResponse),\n  login: (email, password) => fetch(`${API_URL}/auth/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  }).then(handleResponse),\n  logout: token => fetch(`${API_URL}/auth/logout`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  getCurrentUser: token => fetch(`${API_URL}/auth/me`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  resetPassword: email => fetch(`${API_URL}/auth/reset-password`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email\n    })\n  }).then(handleResponse),\n  // Account endpoints\n  getBalance: token => fetch(`${API_URL}/account/balance`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  getTransactions: token => fetch(`${API_URL}/account/transactions`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  // Withdrawal endpoints\n  withdraw: (token, amount, withdrawalMethod = 'mpesa', details = {}) => fetch(`${API_URL}/withdraw`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      amount,\n      withdrawal_method: withdrawalMethod,\n      phone_country_code: details.phoneCountryCode || null,\n      phone_number: details.phoneNumber || null,\n      bank_id: details.bankId || null,\n      bank_name: details.bankName || null,\n      account_number: details.accountNumber || null\n    })\n  }).then(handleResponse),\n  getWithdrawalHistory: token => fetch(`${API_URL}/withdraw/history`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  // Deposit endpoints\n  deposit: (token, amount, details = {}) => {\n    var _details$bank, _details$bank2;\n    return fetch(`${API_URL}/deposit`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        amount,\n        bank_id: ((_details$bank = details.bank) === null || _details$bank === void 0 ? void 0 : _details$bank.id) || null,\n        bank_name: ((_details$bank2 = details.bank) === null || _details$bank2 === void 0 ? void 0 : _details$bank2.name) || null,\n        account_number: details.accountNumber || null\n      })\n    }).then(handleResponse);\n  },\n  getDepositHistory: token => fetch(`${API_URL}/deposit/history`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  // Profile endpoints\n  getProfile: token => fetch(`${API_URL}/profile`, {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(handleResponse),\n  updateProfile: (token, fullName, avatarUrl = null) => fetch(`${API_URL}/profile`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      full_name: fullName,\n      avatar_url: avatarUrl\n    })\n  }).then(handleResponse)\n};","map":{"version":3,"names":["createClient","supabaseUrl","process","env","REACT_APP_SUPABASE_URL","supabaseAnonKey","REACT_APP_SUPABASE_ANON_KEY","console","error","supabase","API_URL","REACT_APP_API_URL","handleResponse","response","data","json","ok","Error","status","api","register","email","password","fullName","fetch","method","headers","body","JSON","stringify","full_name","then","login","logout","token","getCurrentUser","resetPassword","getBalance","getTransactions","withdraw","amount","withdrawalMethod","details","withdrawal_method","phone_country_code","phoneCountryCode","phone_number","phoneNumber","bank_id","bankId","bank_name","bankName","account_number","accountNumber","getWithdrawalHistory","deposit","_details$bank","_details$bank2","bank","id","name","getDepositHistory","getProfile","updateProfile","avatarUrl","avatar_url"],"sources":["/home/diana/Mull$$/frontend/src/services/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL;\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY;\n\n// Helpful runtime validation: React .env variables are injected at build/dev-server start.\n// If they're missing at runtime it's usually because the dev server wasn't restarted\n// after creating/updating `.env` or the `.env` file is in the wrong location.\nif (!supabaseUrl || !supabaseAnonKey) {\n  // Keep this as console.error so it shows clearly in the browser/dev server logs\n  // and helps the developer quickly spot misconfiguration instead of a vague\n  // \"Invalid API key\" error from the Supabase client.\n  // eslint-disable-next-line no-console\n  console.error('Supabase config missing: REACT_APP_SUPABASE_URL or REACT_APP_SUPABASE_ANON_KEY is not set.');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// API configuration\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Helper function to handle API responses\nconst handleResponse = async (response) => {\n  const data = await response.json();\n  if (!response.ok) {\n    const error = new Error(data.error || 'An error occurred');\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n  return data;\n};\n\nexport const api = {\n  // Auth endpoints\n  register: (email, password, fullName) => \n    fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password, full_name: fullName })\n    }).then(handleResponse),\n  \n  login: (email, password) => \n    fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password })\n    }).then(handleResponse),\n  \n  logout: (token) => \n    fetch(`${API_URL}/auth/logout`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(handleResponse),\n  \n  getCurrentUser: (token) => \n    fetch(`${API_URL}/auth/me`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  resetPassword: (email) =>\n    fetch(`${API_URL}/auth/reset-password`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email })\n    }).then(handleResponse),\n  \n  // Account endpoints\n  getBalance: (token) => \n    fetch(`${API_URL}/account/balance`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  getTransactions: (token) => \n    fetch(`${API_URL}/account/transactions`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  // Withdrawal endpoints\n  withdraw: (token, amount, withdrawalMethod = 'mpesa', details = {}) => \n    fetch(`${API_URL}/withdraw`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({ \n        amount, \n        withdrawal_method: withdrawalMethod,\n        phone_country_code: details.phoneCountryCode || null,\n        phone_number: details.phoneNumber || null,\n        bank_id: details.bankId || null,\n        bank_name: details.bankName || null,\n        account_number: details.accountNumber || null\n      })\n    }).then(handleResponse),\n  \n  getWithdrawalHistory: (token) => \n    fetch(`${API_URL}/withdraw/history`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  // Deposit endpoints\n  deposit: (token, amount, details = {}) => \n    fetch(`${API_URL}/deposit`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({ \n        amount,\n        bank_id: details.bank?.id || null,\n        bank_name: details.bank?.name || null,\n        account_number: details.accountNumber || null\n      })\n    }).then(handleResponse),\n  \n  getDepositHistory: (token) => \n    fetch(`${API_URL}/deposit/history`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  // Profile endpoints\n  getProfile: (token) =>\n    fetch(`${API_URL}/profile`, {\n      headers: { 'Authorization': `Bearer ${token}` }\n    }).then(handleResponse),\n  \n  updateProfile: (token, fullName, avatarUrl = null) =>\n    fetch(`${API_URL}/profile`, {\n      method: 'PUT',\n      headers: { \n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({ full_name: fullName, avatar_url: avatarUrl })\n    }).then(handleResponse)\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}